# Jackson @JsonView ç¤ºä¾‹

> åŸæ–‡ï¼š<http://web.archive.org/web/20230101150211/https://www.mkyong.com/java/jackson-jsonview-examples/>

åœ¨ Jackson ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`@JsonView`æ¥é™åˆ¶æˆ–æ§åˆ¶ä¸åŒç”¨æˆ·çš„å­—æ®µæ˜¾ç¤ºã€‚

ç”¨äºæµ‹è¯•çš„ POJOã€‚

Staff.java

```
 package com.mkyong;

public class Staff {

    private String name;
    private int age;
    private String[] position;
    private List<String> skills;
    private Map<String, BigDecimal> salary;

	// getters , setters , boring stuff
} 
```

*ç”¨æ°å…‹é€Š 2.9.8 æµ‹è¯•çš„ PS*

## 1.è§†å›¾

ä¸€ä¸ªæ ‡å‡†çš„ Java ç±»æ¥å®šä¹‰ 3 ä¸ªè§†å›¾:æ™®é€šè§†å›¾ã€ç»ç†è§†å›¾å’ŒäººåŠ›èµ„æºè§†å›¾ã€‚

CompanyViews.java

```
 package com.mkyong;

public class CompanyViews {

    public static class Normal{};

    public static class Manager extends Normal{};

    public static class HR extends Normal{};

} 
```

## 2.Json è§†å›¾

å°†`@JsonView`ç½®äºå­—æ®µçº§åˆ«ï¼Œä»¥é™åˆ¶ä¸åŒè§†å›¾çš„å­—æ®µæ˜¾ç¤ºã€‚

*   æ­£å¸¸â€“æ˜¾ç¤ºå§“åå’Œå¹´é¾„ã€‚
*   ç»ç†-æ˜¾ç¤ºå§“åã€å¹´é¾„ã€èŒä½å’ŒæŠ€èƒ½
*   HRâ€“æ˜¾ç¤ºå§“åã€å¹´é¾„ã€å·¥èµ„å’ŒèŒä½

P.S .ç»ç†æ— æƒæŸ¥çœ‹è–ªèµ„å­—æ®µï¼ŒHR ä¸å…³å¿ƒä½ æœ‰ä»€ä¹ˆæŠ€èƒ½ğŸ™‚

Staff.java

```
 package com.mkyong;

import com.fasterxml.jackson.annotation.JsonView;

import java.math.BigDecimal;
import java.util.Arrays;
import java.util.List;
import java.util.Map;

public class Staff {

    @JsonView(CompanyViews.Normal.class)
    private String name;

    @JsonView(CompanyViews.Normal.class)
    private int age;

    // two views
    @JsonView({CompanyViews.HR.class, CompanyViews.Manager.class})
    private String[] position;

    @JsonView(CompanyViews.Manager.class)
    private List<String> skills;

    @JsonView(CompanyViews.HR.class)
    private Map<String, BigDecimal> salary; 
```

## 3.Jacksonâ€“å¯ç”¨@JsonView

3.1 ä¸‹é¢çš„ä¾‹å­å‘æ‚¨å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨`mapper.writerWithView()`æ¥å¯ç”¨`JsonView`

JacksonExample.java

```
 package com.mkyong;

import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.SerializationFeature;

import java.io.IOException;
import java.math.BigDecimal;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;

public class JacksonExample {

    public static void main(String[] args) {

        ObjectMapper mapper = new ObjectMapper();

        Staff staff = createStaff();

        try {

            // to enable pretty print
            mapper.enable(SerializationFeature.INDENT_OUTPUT);

            // normal
            String normalView = mapper.writerWithView(CompanyViews.Normal.class).writeValueAsString(staff);

            System.out.format("Normal views\n%s\n", normalView);

            // manager
            String managerView = mapper.writerWithView(CompanyViews.Manager.class).writeValueAsString(staff);

            System.out.format("Manager views\n%s\n", managerView);

            // hr
            String hrView = mapper.writerWithView(CompanyViews.HR.class).writeValueAsString(staff);

            System.out.format("HR views\n%s\n", hrView);

        } catch (IOException e) {
            e.printStackTrace();
        }

    }

    private static Staff createStaff() {

        Staff staff = new Staff();

        staff.setName("mkyong");
        staff.setAge(38);
        staff.setPosition(new String[]{"Founder", "CTO", "Writer"});
        Map<String, BigDecimal> salary = new HashMap() {{
            put("2010", new BigDecimal(10000));
            put("2012", new BigDecimal(12000));
            put("2018", new BigDecimal(14000));
        }};
        staff.setSalary(salary);
        staff.setSkills(Arrays.asList("java", "python", "node", "kotlin"));

        return staff;

    }

} 
```

è¾“å‡º

```
 Normal views
{
  "name" : "mkyong",
  "age" : 38
}

Manager views
{
  "name" : "mkyong",
  "age" : 38,
  "position" : [ "Founder", "CTO", "Writer" ],
  "skills" : [ "java", "python", "node", "kotlin" ]
}

HR views
{
  "name" : "mkyong",
  "age" : 38,
  "position" : [ "Founder", "CTO", "Writer" ],
  "salary" : {
    "2018" : 14000,
    "2012" : 12000,
    "2010" : 10000
  }
} 
```

## å‚è€ƒ

*   [Jacksonâ€“å¦‚ä½•å¿½ç•¥ç©ºå­—æ®µ](http://web.archive.org/web/20210814221730/https://www.mkyong.com/java/jackson-how-to-ignore-null-fields/)
*   [@ Spring MVC ä¸Šçš„ JSON view](http://web.archive.org/web/20210814221730/https://www.mkyong.com/spring-mvc/spring-4-mvc-ajax-hello-world-example/)
*   [æ°å…‹é€Šæ•°æ®ç»‘å®š](http://web.archive.org/web/20210814221730/https://github.com/FasterXML/jackson-databind/)
*   [Jackson 2â€“å°† Java å¯¹è±¡è½¬æ¢æˆ JSON ä» JSON è½¬æ¢è¿‡æ¥](http://web.archive.org/web/20210814221730/https://www.mkyong.com/java/jackson-2-convert-java-object-to-from-json/)

Tags : [jackson](http://web.archive.org/web/20210814221730/https://mkyong.com/tag/jackson/) [json](http://web.archive.org/web/20210814221730/https://mkyong.com/tag/json/)<input type="hidden" id="mkyong-current-postId" value="15082">