# ORA-12505，TNS:监听程序当前不知道连接描述符中给定的 SID

> 原文:[http://web . archive . org/web/20230101150211/https://mkyong . com/JDBC/ora-12505-tns listener-does-not-currently-know-of-sid-given-in-connect-descriptor/](http://web.archive.org/web/20230101150211/https://mkyong.com/jdbc/ora-12505-tnslistener-does-not-currently-know-of-sid-given-in-connect-descriptor/)

![oracle tnsname](../Images/53013e5532c738bfafc4d4fb72c4f2f5.png)

这是由于请求的 SID 在`{ORACLE_HOME}/network/admin/tnsnames.ora`中不存在

页（page 的缩写）使用 Oracle 数据库 19c 和`ojdbc8.jar`进行测试

## 1.JDBC

```
 try (Connection conn = DriverManager.getConnection(
                "jdbc:oracle:thin:@localhost:1521:xe", "system", "password")) {

           //...

	} catch (SQLException e) {
		e.printStackTrace();
	} catch (Exception e) {
		e.printStackTrace();
	} 
```

输出:

```
 SQL State: 66000
Listener refused the connection with the following error:
ORA-12505, TNS:listener does not currently know of SID given in connect descriptor 
```

SID `xe`在`ORACLE_HOME/network/admin/tnsnames.ora`中不存在

## 2\. tnsnames.ora 档案

样本。

C:\{ORACLE_HOME}\NETWORK\ADMIN\tnsnames.ora

```
 # tnsnames.ora Network Configuration File: C:\{ORACLE_HOME}\NETWORK\ADMIN\tnsnames.ora
# Generated by Oracle configuration tools.

LISTENER_ORCL =
  (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))

ORACLR_CONNECTION_DATA =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1521))
    )
    (CONNECT_DATA =
      (SID = CLRExtProc)
      (PRESENTATION = RO)
    )
  )

ORCL =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = orcl)
    )
  ) 
```

在上面的`tnsnames.ora`样本中，SID 是`ORCL`

**要修复它**，请更新代码:

```
 try (Connection conn = DriverManager.getConnection(
		"jdbc:oracle:thin:@localhost:1521:orcl", "system", "password")) {

		//...

	} catch (SQLException e) {
		e.printStackTrace();
	} catch (Exception e) {
		e.printStackTrace();
	} 
```

## 参考

*   [tnsnames . ora 文件中的本地命名参数](http://web.archive.org/web/20221225035543/https://docs.oracle.com/database/121/NETRF/tnsnames.htm#NETRF007)

<input type="hidden" id="mkyong-current-postId" value="15122">