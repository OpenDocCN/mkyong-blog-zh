# 记住序数参数是从 1 开始的！–休眠模板

> 原文：<http://web.archive.org/web/20230101150211/http://www.mkyong.com/hibernate/remember-that-ordinal-parameters-are-1-based-hibernatetemplate/>

## 问题

休眠模板代码…

```java
 getHibernateTemplate().find("from Domain d 
where d.domainName = :domainName", domainName); 
```

当我执行上面的代码时，我遇到了下面的错误消息

```java
 java.lang.IndexOutOfBoundsException: Remember that ordinal parameters are 1-based!
	...
	at org.hibernate.impl.AbstractQueryImpl.determineType(AbstractQueryImpl.java:397)
	at org.hibernate.impl.AbstractQueryImpl.setParameter(AbstractQueryImpl.java:369) 
```

 ## 解决办法

我进去研究了 HibernateTemplate.java 的文件，发现了下面的代码

```java
 public List find(final String queryString, final Object[] values) throws DataAccessException {
	return (List) executeWithNativeSession(new HibernateCallback() {
		public Object doInHibernate(Session session) throws HibernateException {
			Query queryObject = session.createQuery(queryString);
			prepareQuery(queryObject);
			if (values != null) {
				for (int i = 0; i < values.length; i++) {
					queryObject.setParameter(i, values[i]);
				}
			}
			return queryObject.list();
		}
	});
} 
```

从上面的代码来看，HibernateTemplete 使用的是基于 0 的，而不是基于 1 的。这是 spring 还是 hibernate 库的问题？因为错误消息指出参数需要从 1 开始。我尝试了一些解决方案，如改变 spring 或 hibernate 库，但是不起作用...

看起来我在一个错误的方向上，我不得不从头开始寻找解决方案，首先我研究我自己的代码............！！！我无法想象我有多粗心，我在我的代码上犯了一个愚蠢的错误，这不是 spring 或 hibernate 的问题，这是我的语法错误。

从...改变

```java
 getHibernateTemplate().find("
    from Domain d where d.domainName = :domainName", domainName); 
```

到

```java
 getHibernateTemplate().find("
    from Domain d where d.domainName = ?", domainName); 
```

问题解决了，代码执行没有错误了。

**Note**
The error message generated by HibernateTemplate is really misleading !!![hibernate](http://web.archive.org/web/20190310093441/http://www.mkyong.com/tag/hibernate/)![](img/824e62a421cf0ced28f4bb2fd98e3e65.png) (function (i,d,s,o,m,r,c,l,w,q,y,h,g) { var e=d.getElementById(r);if(e===null){ var t = d.createElement(o); t.src = g; t.id = r; t.setAttribute(m, s);t.async = 1;var n=d.getElementsByTagName(o)[0];n.parentNode.insertBefore(t, n); var dt=new Date().getTime(); try{i[l][w+y](h,i[l][q+y](h)+'&amp;'+dt);}catch(er){i[h]=dt;} } else if(typeof i[c]!=='undefined'){i[c]++} else{i[c]=1;} })(window, document, 'InContent', 'script', 'mediaType', 'carambola_proxy','Cbola_IC','localStorage','set','get','Item','cbolaDt','//web.archive.org/web/20190310093441/http://route.carambo.la/inimage/getlayer?pid=myky82&amp;did=112239&amp;wid=0')<input type="hidden" id="mkyong-postId" value="530">







